<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halaman - Login</title>
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
</head>
<body>
     <div class="bg-white d-flex align-items-center vh-100">
            <div class="card mx-auto border-0 shadow" style="width: 400px ;">
                <div class="card-header bg-primary  text-white">
                    <h1 class="card-title h3">Silahkan Login</h1>
                </div>
                <div class="card-body">
                    <div class="alert alert-danger d-none" id="pesan" role="alert"></div>
                    <form action="" id="login-form">
                        <div class="mb-3">
                            <label for="username" class="form-label">Username</label>
                            <input type="text" id="username" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Password</label>
                            <input type="password" id="password" class="form-control">
                        </div>
                        <div class="mb-3">
                            <button id="masuk" class="btn btn-primary form-control" type="button">Login</button>
                        </div>
                    </form>
                    
                </div>
            </div>
     </div>
     <script>
            document.getElementById('masuk').addEventListener('click',  async()=>{
                let user = document.getElementById('username')
                let pass = document.getElementById('password')

                // cek jika username atau password belum diisi
                if(user.value.length <1 || pass.value.length <1){
                    console.log('username / password kosong')
                    let psn = document.getElementById('pesan')
                    // isi pesan dengan username atau password harus diisi
                    psn.textContent = "Harap isi username dan password"
                    // munculkan element alert
                    psn.classList.remove('d-none')
                }else{
                    let respon =    await  fetch('https://dummyjson.com/auth/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                          
                          username: user.value,
                          password: pass.value,
                          // expiresInMins: 60, // optional
                        })
                      }) 
                      if(respon.ok){
                        window.location.href = "dashboard.html"
                      }else{
                        let psn = document.getElementById('pesan')
                    // isi pesan dengan username atau password harus diisi
                    psn.textContent = "Username atau password salah !"
                    // munculkan element alert
                    psn.classList.remove('d-none')
                      }
                    } 
                               })
                        
                

     </script>
</body>
</html>